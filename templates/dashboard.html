<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuildWise | Precision Planning</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- LOADING OVERLAY -->
    <div id="loading-overlay" class="hidden">
        <div class="loader-content">
            <div class="spinner"></div>
            <h2 id="loading-text">Analyzing project...</h2>
        </div>
    </div>

    <!-- LANDING VIEW -->
    <div id="landing-view">
        <nav class="navbar">
            <div class="logo">BUILDWISE</div>
            <div class="nav-links">
                <a href="#home">Home</a>
                <a href="#features">Features</a>
                <a href="#how-it-works">How It Works</a>
                <button class="cta-link" onclick="switchView('app')">Start Planning</button>
            </div>
        </nav>

        <section id="home" class="hero">
            <div class="hero-content">
                <h1>The Future of<br>Construction Planning.</h1>
                <p>AI-powered precision for modern architectural projects. Worker allocation, material estimation, and
                    cost analysis in seconds.</p>
                <button class="btn-primary" onclick="switchView('app')">Launch Planner</button>
            </div>
        </section>

        <section id="features" class="features-section">
            <div class="section-header">
                <h2>Why BuildWise?</h2>
                <p>Comprehensive features designed for modern construction management</p>
            </div>
            <div class="features-grid">
                <div class="feature-card" onclick="switchView('app')">
                    <div class="icon">‚Çπ</div>
                    <h3>Cost Analysis</h3>
                    <p>Transparent cost breakdown including labor, materials, and overhead.</p>
                </div>
                <div class="feature-card" onclick="switchView('app')">
                    <div class="icon">üë∑</div>
                    <h3>Workforce Planning</h3>
                    <p>Intelligent worker allocation across categories.</p>
                </div>
                <div class="feature-card" onclick="switchView('app')">
                    <div class="icon">‚ö°</div>
                    <h3>Real-Time Processing</h3>
                    <p>Instant calculations and results with AI.</p>
                </div>
            </div>
        </section>

        <!-- HOW IT WORKS SECTION -->
        <section id="how-it-works" class="how-section">
            <div class="section-header">
                <h2>How BuildWise Works</h2>
                <p>From idea to estimate in three simple steps</p>
            </div>
            <div class="steps-container">
                <!-- Step 1 -->
                <div class="step-card">
                    <div class="step-circle">1</div>
                    <h3>Enter Project Details</h3>
                    <p>Provide project information such as area, floors, project type, budget, and timeline.</p>
                </div>
                <!-- Connector -->
                <div class="connector"></div>
                <!-- Step 2 -->
                <div class="step-card">
                    <div class="step-circle">2</div>
                    <h3>AI Analysis</h3>
                    <p>BuildWise processes inputs using estimation logic and Generative AI reasoning.</p>
                </div>
                <!-- Connector -->
                <div class="connector"></div>
                <!-- Step 3 -->
                <div class="step-card">
                    <div class="step-circle">3</div>
                    <h3>Get Results</h3>
                    <p>View cost breakdown, materials, workforce, timeline, and risks in a structured dashboard.</p>
                </div>
            </div>
        </section>

        <footer>
            <p>&copy; 2026 BuildWise. Crafted with clean intelligence.</p>
        </footer>
    </div>

    <!-- AUTH MODAL -->
    <div id="auth-modal" class="modal-overlay hidden">
        <div class="modal-container glass-panel">
            <button class="close-modal" onclick="closeModal()">√ó</button>

            <div class="modal-tabs">
                <button class="tab-btn active" id="tab-login" onclick="switchAuthTab('login')">Login</button>
                <button class="tab-btn" id="tab-signup" onclick="switchAuthTab('signup')">Sign Up</button>
            </div>

            <!-- LOGIN FORM -->
            <form id="form-login" class="auth-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>USERNAME / EMAIL</label>
                    <input type="text" name="username" required placeholder="admin">
                </div>
                <div class="form-group">
                    <label>PASSWORD</label>
                    <input type="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div id="login-error" class="error-msg hidden"></div>
                <button type="submit" class="btn-primary btn-block">Access Dashboard ‚Üí</button>
            </form>

            <!-- SIGNUP FORM -->
            <form id="form-signup" class="auth-form hidden" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>FULL NAME</label>
                    <input type="text" name="fullname" required placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label>EMAIL</label>
                    <input type="email" name="email" required placeholder="john@example.com">
                </div>
                <div class="form-group">
                    <label>PASSWORD</label>
                    <input type="password" name="password" required placeholder="Create a password">
                </div>
                <div id="signup-error" class="error-msg hidden"></div>
                <button type="submit" class="btn-primary btn-block">Create Account ‚Üí</button>
            </form>
        </div>
    </div>
    </div>

    <!-- APP VIEW -->
    <div id="app-view" class="hidden">
        <div class="app-container">
            <!-- Sidebar / Form -->
            <aside class="app-sidebar">
                <div class="sidebar-header">
                    <div class="logo small" onclick="switchView('landing')" style="cursor:pointer">‚Üê BUILDWISE</div>
                </div>

                <form id="plan-form">
                    <!-- STEP 1 -->
                    <div id="step-1" class="form-step">
                        <h3>Project Details (1/2)</h3>
                        <div class="form-group">
                            <label>PLOT AREA (SQ FT)</label>
                            <input type="number" id="area" value="1000" min="200" required>
                        </div>
                        <div class="form-group">
                            <label>FLOORS (G + X)</label>
                            <input type="number" id="floors" value="1" min="0" max="10" required>
                        </div>
                        <div class="form-group">
                            <label>PROJECT TYPE</label>
                            <select id="type">
                                <option value="Residential">Residential</option>
                                <option value="Commercial">Commercial</option>
                                <option value="Mix Use">Mixed Use</option>
                            </select>
                        </div>
                        <div class="form-group grid-2">
                            <div>
                                <label>COUNTRY</label>
                                <select id="country">
                                    <option value="India">India</option>
                                    <option value="USA">USA</option>
                                </select>
                            </div>
                            <div>
                                <label>CURRENCY</label>
                                <select id="currency">
                                    <option value="INR">INR (‚Çπ)</option>
                                    <option value="USD">USD ($)</option>
                                    <option value="EUR">EUR (‚Ç¨)</option>
                                    <option value="GBP">GBP (¬£)</option>
                                </select>
                            </div>
                        </div>
                        <button type="button" class="btn-next" onclick="nextStep()">Next ‚Üí</button>
                    </div>

                    <!-- STEP 2 -->
                    <div id="step-2" class="form-step hidden">
                        <h3>Constraints (2/2)</h3>
                        <div class="form-group">
                            <label>BUDGET PREFERENCE</label>
                            <select id="budget-pref">
                                <option value="Standard">Standard</option>
                                <option value="Premium">Premium</option>
                                <option value="Budget">Low Cost</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>TIMELINE PRIORITY</label>
                            <select id="time-pref">
                                <option value="Standard">Standard Pace</option>
                                <option value="Fast Track">Fast Track</option>
                            </select>
                        </div>
                        <div class="button-group">
                            <button type="button" class="btn-back" onclick="prevStep()">‚Üê Back</button>
                            <button type="submit" id="generate-btn">Generate Plan</button>
                        </div>
                    </div>
                </form>

                <!-- SCENARIO CONTROLS (Floating) -->
                <div class="scenario-panel">
                    <h4>Scenario Controls</h4>
                    <p class="small-text">Adjust to recalculate (Coming Soon)</p>
                    <input type="range" class="slider" disabled>
                </div>
            </aside>

            <!-- Main Results Area -->
            <main class="app-main">
                <!-- TABS -->
                <div class="tabs-nav">
                    <button class="tab-btn active" onclick="openTab('overview')">Overview</button>
                    <button class="tab-btn" onclick="openTab('cost')">Cost</button>
                    <button class="tab-btn" onclick="openTab('materials')">Materials</button>
                    <button class="tab-btn" onclick="openTab('workforce')">Workforce</button>
                    <button class="tab-btn" onclick="openTab('timeline')">Timeline</button>
                    <button class="tab-btn" onclick="openTab('risks')">Risks</button>
                    <button class="btn-download">‚Üì Report</button>
                </div>

                <!-- TAB CONTENTS -->
                <div id="results-container">

                    <!-- Overview Tab -->
                    <div id="tab-overview" class="tab-content active">
                        <h2>Project Vision</h2>
                        <div class="result-card full-width">
                            <p id="summary-text" class="card-text">Enter details and generate plan to see the vision.
                            </p>
                        </div>
                    </div>


                    <!-- Cost Tab -->
                    <div id="tab-cost" class="tab-content">
                        <h2>Financial Breakdown</h2>
                        <div class="result-card">
                            <h3 class="card-title">Total Estimated Cost</h3>
                            <div class="big-value" id="total-cost">‚Çπ0</div>
                            <div class="stat-row"><span>Material Budget</span><span id="cost-material">‚Çπ0</span></div>
                            <div class="stat-row"><span>Labor Budget</span><span id="cost-labor">‚Çπ0</span></div>
                            <div class="stat-row"><span>Arch + Contingency</span><span id="cost-other">‚Çπ0</span></div>
                        </div>

                        <div class="grid-2">
                            <!-- Material Table -->
                            <div class="result-card">
                                <h3>Material Cost Breakdown</h3>
                                <div class="table-container">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Item</th>
                                                <th>Cost (‚Çπ)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="material-table-body">
                                            <!-- JS will populate -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td><strong>Total</strong></td>
                                                <td><strong id="mat-table-total">-</strong></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>

                            <!-- Labor Table -->
                            <div class="result-card">
                                <h3>Labor Workforce Plan</h3>
                                <div class="table-container">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Type</th>
                                                <th>Workforce</th>
                                                <th>Duration</th>
                                                <th>Wage/Day</th>
                                                <th>Total (‚Çπ)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="labor-table-body">
                                            <!-- JS will populate -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td><strong>Total</strong></td>
                                                <td><strong id="lab-total-workers">-</strong></td>
                                                <td><strong id="lab-total-days">-</strong></td>
                                                <td>-</td>
                                                <td><strong id="lab-table-total">-</strong></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Materials Tab -->
                    <div id="tab-materials" class="tab-content">
                        <h2>Resource Requirements</h2>
                        <div class="result-card">
                            <div class="stat-row"><span>Cement</span><span id="mat-cement">-</span></div>
                            <div class="stat-row"><span>Steel</span><span id="mat-steel">-</span></div>
                            <div class="stat-row"><span>Sand</span><span id="mat-sand">-</span></div>
                            <div class="stat-row"><span>Bricks</span><span id="mat-bricks">-</span></div>
                        </div>
                    </div>

                    <!-- Workforce Tab -->
                    <div id="tab-workforce" class="tab-content">
                        <h2>Daily Workforce</h2>
                        <div class="result-card">
                            <p id="worker-text">Detailed breakdown pending.</p>
                        </div>
                    </div>

                    <!-- Timeline Tab -->
                    <div id="tab-timeline" class="tab-content">
                        <h2>Execution Timeline <span id="total-weeks" class="badge-outline">0 WEEKS</span></h2>
                        <div id="timeline-list" class="timeline-vertical">
                            <!-- Phases -->
                        </div>
                    </div>

                    <!-- Risks Tab -->
                    <div id="tab-risks" class="tab-content">
                        <div class="grid-2">
                            <div class="result-card">
                                <h3>Potential Risks</h3>
                                <ul id="risks-list" class="styled-list"></ul>
                            </div>
                            <div class="result-card">
                                <h3>Optimizations</h3>
                                <ul id="opts-list" class="styled-list"></ul>
                            </div>
                        </div>
                    </div>

                </div>
            </main>
        </div>
    </div>

    <!-- HIDDEN REPORT TEMPLATE (For PDF Generation) -->
    <div id="report-template" class="hidden-print">
        <div class="report-header">
            <h1>BUILDWISE</h1>
            <p>AI-POWERED CONSTRUCTION PLAN</p>
            <div class="report-meta">
                <span id="rep-date"></span> | <span id="rep-type"></span> | <span id="rep-area"></span>
            </div>
        </div>

        <div class="report-section">
            <h2>Project Vision</h2>
            <p id="rep-summary"></p>
        </div>

        <div class="report-grid">
            <div class="report-card">
                <h3>Financials</h3>
                <div class="rep-row"><span>Total</span><strong id="rep-total"></strong></div>
                <div class="rep-row"><span>Material</span><span id="rep-mat-cost"></span></div>
                <div class="rep-row"><span>Labor</span><span id="rep-lab-cost"></span></div>
            </div>
            <div class="report-card">
                <h3>Timeline</h3>
                <div class="rep-row"><span>Duration</span><strong id="rep-duration"></strong></div>
                <div class="rep-row"><span>Workforce</span><span id="rep-workers"></span></div>
            </div>
        </div>

        <!-- NEW DETAILED TABLES -->
        <div class="report-section">
            <h3>Detailed Cost Breakdown</h3>

            <div class="report-flex-row" style="display: flex; gap: 20px; margin-bottom: 20px;">
                <div style="flex: 1;">
                    <h4>Material Costs</h4>
                    <table class="rep-table" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                        <thead>
                            <tr style="border-bottom: 1px solid #333; text-align: left;">
                                <th style="padding: 5px;">Item</th>
                                <th style="padding: 5px;">Cost</th>
                            </tr>
                        </thead>
                        <tbody id="rep-mat-table-body"></tbody>
                    </table>
                </div>

                <div style="flex: 1;">
                    <h4>Labor Breakdown</h4>
                    <table class="rep-table" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                        <thead>
                            <tr style="border-bottom: 1px solid #333; text-align: left;">
                                <th style="padding: 5px;">Type</th>
                                <th style="padding: 5px;">Days</th>
                                <th style="padding: 5px;">Wage</th>
                                <th style="padding: 5px;">Total</th>
                            </tr>
                        </thead>
                        <tbody id="rep-lab-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="report-section">
            <h3>Execution Phase Plan</h3>
            <div id="rep-timeline-list" class="rep-timeline"></div>
        </div>

        <div class="report-footer">
            <p>Generated by BuildWise AI. Estimates are indicative based on Hyderabad rates.</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>